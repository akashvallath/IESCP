{% extends 'layout.html' %}
{% block title %}Home{% endblock title %}
{% block body %}
<div class="navbar">
    <div style="margin-left: 10px;">
        <img class="roundimage" src="https://api.dicebear.com/9.x/thumbs/svg?seed=Mimi">
        <h5 style="display: inline;">{{ admin.username }}</h5>
    </div>
    <a href="{{url_for('find_influencersforadmin', id=admin.id)}}"><i class="fa-solid fa-magnifying-glass"></i> Influencers</a>
    <a href="{{url_for('home')}}"><i class="fa-solid fa-house-user"></i> Home</a>
    <a href="{{url_for('admin_stats', id=admin.id)}}"><i class="fa-solid fa-chart-column"></i> Stats</a>
    <a href="{{url_for('find_sponsorsforadmin', id=admin.id)}}"><i class="fa-solid fa-magnifying-glass"></i> Sponsors</a>
    {% if 'username' in session %}
    <a href="{{url_for('logout')}}"><i class="fa-solid fa-right-to-bracket"></i> Logout</a>
    {% else %}
    <a href="{{url_for('login')}}"><i class="fa-solid fa-right-to-bracket"></i> Login</a>
    {% endif %}
</div>
{% include 'message.html' %}
<div class="content">
    <h3 style="margin-left: 10px; margin-bottom: 15px;">Welcome, {{admin.username}}</h3>
    <div class="container" style="background-color: rgb(148, 128, 216); display: flex;">
        <div style="margin-left: 10px;">
            <h6>â†“Total Campaigns </h6>
            <h2>{{ total_campaigns }}</h2>
        </div>
        <div style="margin-left: 50px;">
            <h6>â†“Total Sponsors </h6>
            <h2>{{ total_sponsors }}</h2>
        </div>
        <div style="margin-left: 50px;">
            <h6>â†“Total Influencers </h6>
            <h2>{{ total_influencers }}</h2>
        </div>
        <div style="margin-left: 50px;">
            <h6>â†“Flagged Influencers </h6>
            <h2>{{ flaggedinfluencers | length }}</h2>
        </div>
        <div style="margin-left: 50px;">
            <h6>â†“Flagged Sponsors </h6>
            <h2>{{ flaggedsponsors| length }}</h2>
        </div>
        <div style="margin-left: 50px;">
            <h6>â†“Flagged Campaigns </h6>
            <h2>{{ flaggedcampaigns | length }}</h2>
        </div>
    </div>
    <div class="container" style="margin-top: 20px;">
        <h4 style="margin-left: 10px; margin-bottom: 15px;">ðŸš©Flagged Influencers</h4>
        {% if flaggedinfluencers %}
        <table>
        <tr>
            <th>USERNAME</th>
            <th>FULLNAME</th>
            <th>EMAIL</th>
            <th>NICHE</th>
            <th>UNFLAG</th>
        </tr>
        {% for influencer in flaggedinfluencers %}
        <tr>
            <td>{{ influencer.username }}</td>
            <td>{{ influencer.fullname }}</td>
            <td>{{ influencer.email }}</td>
            <td>{{ influencer.niche }}</td>
            <td><a href="{{url_for('unflaginfluencer', id=admin.id, influencer_id=influencer.id)}}"><b>UNflag</b></a></td>
        </tr>
        {% endfor %}
        </table>
        {% else %}
        <p style="margin-left: 10px;">No Influencers are Flagged !</p>
        {% endif %}
    </div>
    <div class="container" style="margin-top: 20px;">
        <h4 style="margin-left: 10px; margin-bottom: 15px;">ðŸš©Flagged Sponsor's</h4>
        {% if flaggedsponsors %}
        <table>
        <tr>
            <th>USERNAME</th>
            <th>COMPANY</th>
            <th>EMAIL</th>
            <th>INDUSTRY-SECTOR</th>
            <th>UNFLAG</th>
        </tr>
        {% for sponsor in flaggedsponsors %}
        <tr>
            <td><a href="{{url_for('sponsorprofileforadmin', id=admin.id, sponsor_id= sponsor.id)}}"><b>{{ sponsor.username }}</b></a></td>
            <td>{{ sponsor.companyname }}</td>
            <td>{{ sponsor.email }}</td>
            <td>{{ sponsor.industrysector }}</td>
            <td><a href="{{url_for('unflagsponsor', id=admin.id, sponsor_id=sponsor.id)}}">UNflag</a></td>
        </tr>
        {% endfor %}
        </table>
        {% else %}
        <p style="margin-left: 10px;">No Sponsors are Flagged !</p>
        {% endif %}
    </div>
    <div class="container" style="margin-top: 20px;">
        <h4 style="margin-left: 10px;">ðŸš©Flagged Campaing's</h4>
        {% if flaggedcampaigns %}
        <table>
        <tr>
            <th>CAMPAIGN NAME</th>
            <th>SPONSOR</th>
            <th>TYPE</th>
            <th>BUDGET</th>
            <th>START DATE</th>
            <th>END DATE</th>
            <th>UNFLAG</th>
        </tr>
        {% for campaign in flaggedcampaigns %}
        <tr>
            <td><a href="{{url_for('campaigndetailsforadmin', id=admin.id, campaign_id=campaign.id)}}"><b>{{ campaign.name }}</b></a></td>
            <td>{{ campaign.sponsor.username }}</td>
            <td>{{ campaign.typeofcampaign }}</td>
            <td>{{ campaign.budget }}</td>
            <td>{{ campaign.created_on.strftime('%B %d, %Y') }}</td>
            <td>{{ campaign.deadline.strftime('%B %d, %Y') }}</td>
            <td><a href="{{url_for('unflagcampaign', id=admin.id, campaign_id=campaign.id)}}">UNflag</a></td>
        </tr>
        {% endfor %}
        </table>
        {% else %}
        <p style="margin-left: 10px;">No campaigns are Flagged !</p>
        {% endif %}
    </div>
</div>
{% endblock body %}